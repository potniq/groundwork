{% extends "base.html" %}

{% block title %}Requested Cities | Groundwork{% endblock %}

{% block meta %}
{% set base_url = request.url.scheme ~ "://" ~ request.url.netloc %}
<meta name="description" content="View and submit city requests for Groundwork transport intelligence coverage.">
<meta property="og:title" content="Requested Cities | Groundwork">
<meta property="og:description" content="View and submit city requests for Groundwork transport intelligence coverage.">
<meta property="og:type" content="website">
<meta property="og:site_name" content="Groundwork by Potniq">
<meta property="og:image" content="{{ base_url }}/static/groundwork_logo.png">
<meta property="og:url" content="{{ base_url }}/requests">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Requested Cities | Groundwork">
<meta name="twitter:description" content="View and submit city requests for Groundwork transport intelligence coverage.">
<meta name="twitter:image" content="{{ base_url }}/static/groundwork_logo.png">
{% endblock %}

{% block content %}
<section class="panel">
    <h1>Requested Cities</h1>
    <p class="subdued">Public list of submitted city requests.</p>

    {% if city_requests %}
    <div class="table-wrap">
        <table>
            <thead>
                <tr>
                    <th>Requested Input</th>
                    <th>Email</th>
                    <th>Status</th>
                    <th>Requested At</th>
                </tr>
            </thead>
            <tbody>
                {% for item in city_requests %}
                <tr>
                    <td>{{ item.raw_input }}</td>
                    <td>{{ item.email or "-" }}</td>
                    <td>{{ item.status }}</td>
                    <td>{{ item.requested_at.strftime("%Y-%m-%d %H:%M") if item.requested_at else "-" }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p>No city requests submitted yet.</p>
    {% endif %}
</section>
{% endblock %}
